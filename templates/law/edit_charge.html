{% extends "law/edit_base.html" %}

{% block content %}
{{ block.super }}

<div id="path">
{% for p in charge.parents %}&raquo;<a href="/edit{{p.get_absolute_url}}">{{ p.penal_code }} {{ p.label }}</a>{% endfor %}
</div>
<h2>{{ charge.penal_code }} {{ charge.label }}</h2>

<form action="add_charge/" method="post">
<fieldset><legend>add sub-charge</legend>
<table>
{{ add_charge_form.as_table }}
</table>
<input type="submit" value="add charge" />
</fieldset>
</form>

<ul>
{% for charge in charge.children %}
<li><a href="/edit{{charge.get_absolute_url}}">{{ charge.penal_code }} {{ charge.label }}</a></li>
{% endfor %}
</ul>

<h3>classifications</h3>
<table class="categories">
  <tr>
    <th class="yes">yes</th>
    <th class="probably">probably</th>
    <th class="maybe">maybe</th></tr>
  <tr>
    <td>
      <ul>
	{% for cc in charge.yes %}
	<li><a href="/edit{{cc.classification.get_absolute_url}}">{{ cc.classification.label }}</a> (<a href="remove_classification/{{cc.classification.id}}/">X</a>)
	  <ul>
	    {% for clco in cc.classification.classificationconsequence_set.all %}
	    <li><a href="/edit{{clco.consequence.area.get_absolute_url}}">{{ clco.consequence.area.label }}</a>: <a href="/edit{{clco.consequence.get_absolute_url}}">{{ clco.consequence.label }}</a></li>
	    {% endfor %}
	  </ul>
	</li>
	{% endfor %}
      </ul>
    </td>

    <td>
      <ul>
	{% for cc in charge.probably %}
	<li><a href="/edit{{cc.classification.get_absolute_url}}">{{ cc.classification.label }}</a> (<a href="remove_classification/{{cc.classification.id}}/">X</a>)
	  <ul>
	    {% for clco in cc.classification.classificationconsequence_set.all %}
	    <li><a href="/edit{{clco.consequence.area.get_absolute_url}}">{{ clco.consequence.area.label }}</a>: <a href="/edit{{clco.consequence.get_absolute_url}}">{{ clco.consequence.label }}</a></li>
	    {% endfor %}
	  </ul>
	</li>
	{% endfor %}
      </ul>
    </td>

    <td>
      <ul>
	{% for cc in charge.maybe %}
	<li><a href="/edit{{cc.classification.get_absolute_url}}">{{ cc.classification.label }}</a> 
	  (<a href="remove_classification/{{cc.classification.id}}/">X</a>)
	  <ul>
	    {% for clco in cc.classification.classificationconsequence_set.all %}
	    <li><a href="/edit{{clco.consequence.area.get_absolute_url}}">{{ clco.consequence.area.label }}</a>: <a href="/edit{{clco.consequence.get_absolute_url}}">{{ clco.consequence.label }}</a></li>
	    {% endfor %}
	  </ul>
	</li>
	{% endfor %}
      </ul>
    </td>
  </tr>
</table>

<form action="add_classification/" method="post">
<table>
{{ charge.add_classification_form.as_table }}
</table>
<input type="submit" value="add" />
</form>

{% endblock %}
