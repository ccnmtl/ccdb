{% extends "law/edit_base.html" %}
{% load markup %}

{% block content %}
{{ block.super }}
<h2>Snapshot: {{ snapshot.label }}</h2>
<p>{{ snapshot.description }}</p>

{% ifequal snapshot.status "in progress" %}
<form action="approve/" method="post">
<input type="submit" value="promote this snapshot to production"
       onclick="addElementClass(this,'hs-hide');removeElementClass('doubleclickstopper','hs-hide');"/>
<p id="doubleclickstopper" class="hs-hide">Working... Please be patient.</p>
</form>
{% endifequal %}

<h2>History</h2>

  {% for event in snapshot.event_set.all %}
  {% ifchanged %}<h3>{{ event.created|date:"D, d M Y" }}</h3>{% endifchanged %}
  <div class="event">
    <div class="byline">
      {{ event.created|date:"H:i" }} by {{ event.user.first_name }} {{ event.user.last_name }}
    </div>
    <div class="description">{{ event.description|markdown }}</div>
    <div class="note">{{ event.note|markdown }}</div>
  </div>
  {% endfor %}

{% endblock %}
